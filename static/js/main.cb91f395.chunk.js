(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),i=n.n(o),l=n(8),c=n(1),s=n(2),u=n(4),d=n(3),h=n(5),f=function(){function e(t,n){Object(c.a)(this,e),this.x=t,this.y=n}return Object(s.a)(e,[{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y)}}]),e}(),m=function(){function e(t,n){Object(c.a)(this,e),this.space=new Array(t*n),this.width=t,this.height=n}return Object(s.a)(e,[{key:"isInside",value:function(e){return e.x>=0&&e.x<this.width&&e.y>=0&&e.y<this.height}},{key:"get",value:function(e){return this.space[e.x+this.width*e.y]}},{key:"set",value:function(e,t){this.space[e.x+this.width*e.y]=t}},{key:"forEach",value:function(e,t){for(var n=0;n<this.height;n++)for(var a=0;a<this.width;a++){var r=this.space[a+n*this.width];null!=r&&e.call(t,r,new f(a,n))}}}]),e}(),g=Object.create(null);g.grow=function(e){return e.energy+=.5,!0},g.move=function(e,t,n){var a=this.checkDestination(n,t);return!(null==a||e.energy<=1||null!=this.grid.get(a))&&(e.energy-=1,this.grid.set(t,null),this.grid.set(a,e),!0)},g.eat=function(e,t,n){var a=this.checkDestination(n,t),r=null!=a&&this.grid.get(a);return!(!r||null==r.energy)&&(e.energy+=r.energy,this.grid.set(a,null),!0)},g.reproduce=function(e,t,n){var a=w(this.legend,e.originChar),r=this.checkDestination(n,t);return!(null==r||e.energy<=2*a.energy||null!=this.grid.get(r))&&(e.energy/=2,a.energy=e.energy,this.grid.set(r,a),!0)};function v(e){return e[Math.floor(Math.random()*e.length)]}var p={n:new f(0,-1),ne:new f(1,-1),e:new f(1,0),se:new f(1,1),s:new f(0,1),sw:new f(-1,1),w:new f(-1,0),nw:new f(-1,-1)},y=function(){function e(t,n){Object(c.a)(this,e),this.world=t,this.vector=n}return Object(s.a)(e,[{key:"look",value:function(e){var t=this.vector.plus(p[e]);return this.world.grid.isInside(t)?b(this.world.grid.get(t)):"#"}},{key:"findAll",value:function(e){var t=[];for(var n in p)this.look(n)===e&&t.push(n);return t}},{key:"find",value:function(e){var t=this.findAll(e);return 0===t.length?null:v(t)}}]),e}();function w(e,t){if(" "===t)return null;var n=new e[t];return n.originChar=t,n}function b(e){return null===e?" ":e.originChar}var k=function(){function e(t,n){Object(c.a)(this,e);var a=new m(t[0].length,t.length);this.grid=a,this.legend=n,t.forEach(function(e,t){for(var r=0;r<e.length;r++)a.set(new f(r,t),w(n,e[r]))})}return Object(s.a)(e,[{key:"getMapInfo",value:function(){var e={output:[],countOfEntities:{}};for(var t in this.legend)e.countOfEntities[t]=0;for(var n=0;n<this.grid.height;n++){for(var a="",r=0;r<this.grid.width;r++){var o=this.grid.get(new f(r,n));a+=b(o),o&&o.originChar&&e.countOfEntities[o.originChar]++}e.output[n]=a}return e}},{key:"turn",value:function(){var e=this,t=[];this.grid.forEach(function(n,a){n.act&&-1===t.indexOf(n)&&(t.push(n),e.letAct(n,a))},this)}},{key:"letAct",value:function(e,t){var n=e.act(new y(this,t));n&&n.type in g&&g[n.type].call(this,e,t,n)||(e.energy-=.2,e.energy<=0&&this.grid.set(t,null))}},{key:"checkDestination",value:function(e,t){if(p.hasOwnProperty(e.direction)){var n=t.plus(p[e.direction]);if(this.grid.isInside(n))return n}}}]),e}(),W=function e(){Object(c.a)(this,e)},E=function(){function e(){Object(c.a)(this,e),this.energy=20}return Object(s.a)(e,[{key:"act",value:function(e){var t=e.find(" ");if(this.energy>60&&t)return{type:"reproduce",direction:t};var n=e.find("*");return n?{type:"eat",direction:n}:t?{type:"move",direction:t}:void 0}}]),e}(),S=function(){function e(){Object(c.a)(this,e),this.energy=20}return Object(s.a)(e,[{key:"act",value:function(e){var t=e.find(" ");if(this.energy>60&&t)return{type:"reproduce",direction:t};var n=e.find("o");return n?{type:"eat",direction:n}:t?{type:"move",direction:t}:void 0}}]),e}(),O=function(){function e(){Object(c.a)(this,e),this.energy=2+Math.floor(5*Math.random())}return Object(s.a)(e,[{key:"act",value:function(e){if(this.energy>15){var t=e.find(" ");if(t)return{type:"reproduce",direction:t}}if(this.energy<20)return{type:"grow"}}}]),e}(),j=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={world:[],worldObj:{},titleStartBtn:"Start",infoWorld:{}},n.createWorld=function(){var e=new k(n.props.sizeWorld,{"#":W,o:E,"*":O,"@":S});n.setState({worldObj:e,world:e.getMapInfo().output,infoWorld:e.getMapInfo().countOfEntities})},n.restartWorld=function(){clearInterval(n.state.timerId),n.createWorld(),n.setState({titleStartBtn:"Start"})},n.startStopBtn=function(){if("Pause"===n.state.titleStartBtn)clearInterval(n.state.timerId),n.setState({titleStartBtn:"Continue"});else{var e=setInterval(function(){n.state.worldObj.turn(),n.setState({world:n.state.worldObj.getMapInfo().output,infoWorld:n.state.worldObj.getMapInfo().countOfEntities})},n.props.turnDelay);n.setState({timerId:e,titleStartBtn:"Pause"})}},n.nextStep=function(){n.state.worldObj.turn(),n.setState({world:n.state.worldObj.getMapInfo().output,infoWorld:n.state.worldObj.getMapInfo().countOfEntities})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.createWorld()}},{key:"render",value:function(){var e=this.state,t=e.world,n=e.titleStartBtn,a=e.infoWorld,o=this.props.toggleShowViewWorld;return r.a.createElement("div",{className:"viewWorld"},r.a.createElement("div",{className:"wrapperButtons"},r.a.createElement("button",{id:"btnStart-Pause",type:"button",className:"btn btn-success",onClick:this.startStopBtn},n),r.a.createElement("button",{id:"btnNextStep",type:"button",className:"btn btn-primary",onClick:this.nextStep},"Next Step"),r.a.createElement("button",{id:"btnRestart",type:"button",className:"btn btn-danger",onClick:this.restartWorld},"Restart")),r.a.createElement("div",{className:"wrapperInfoWorld"},r.a.createElement("div",{className:"columnInfoWorld"},r.a.createElement("div",{className:"infoCount"},"Grass (*): ".concat(a["*"])),r.a.createElement("div",{className:"infoCount"},"Herbivores (o): ".concat(a.o))),r.a.createElement("div",{className:"columnInfoWorld"},r.a.createElement("div",{className:"infoCount"},"Predators (@): ".concat(a["@"])),r.a.createElement("div",{className:"infoCount"},"Walls (#): ".concat(a["#"])))),r.a.createElement("div",{id:"world"},t.map(function(e,t){return r.a.createElement("div",{className:"string",key:t},e)})),r.a.createElement("div",{className:"wrapBackToSettings"},r.a.createElement("button",{onClick:o,id:"btnBack",type:"button",className:"btn btn-secondary"},"Back to World Settings")))}}]),t}(a.Component),N=["#####################################################################","#             #      @                   @                          #","#     ***     #  @      @             @        @       ####         #","#     ****    ######                               *   #  #    #    #","#     *        @              *       @    *         ###  ####      #","#     o    o          @                   #       @    #     #      #","#   o            *        *      #      ###            #  *  #   #  #","#  o       o         *          #####     # #   *            #  ##  #","#      o       @     ***    **   #   #    ######         o   #  o   #","#          o       @            #          o   #    @          # ## #","#     o       @         #########            * #       *            #","#        #             #                       # o           @      #","#        #       @      #         o     *      #         *          #","#     ## ###                o   o      *       *  o      o     *    #","#            @                                     *                #","#      o             * ###           #####       *         @      o #","#            o       ###  *    **       *     o  #   ##   ***       #","#     **         o   #       ****     **  o  #####      o   **      #","#   o     ***        #         *       *                            #","#        o ***        #         *     o *                    @      #","#  o     ***        #         *       *     ####         o          #","#       #######        #       o *      o*  #  ###           @   o  #","#          ***#    #         *       *      #    #    o  **         #","#    o       *  #         *  o    *         #    ###       ***  @   #","#  o     *          #         *    o  *         o        @          #","#       **     #         *       *                          o       #","#####################################################################"],C=["####################################################","#                 ####         ****              ###","#   *  @  ##                 ########       oo    ##","#   *    ##        o o                 ****       *#","#       ##*                        ##########     *#","#      ##***  *         ****                     **#","#* **  #  *  ***      #########                  **#","#* **  #      *              *#   *              **#","#     ##              #   o   #  ***          ######","#*            @       #       #   *        o  #    #","#*                    #  ######                 ** #","###          ****          ***                  ** #","#       o                        @         o       #","#   *     ##  ##  ##  ##               ###      *  #","#   **         #              *       #####  o     #","##  **  o   o  #  #    ***  ***        ###      ** #","###               #   *****                    ****#","####################################################"],z=["##################################","#  *** o      *      @      *  o #","# o **       *** @      @  ***   #","#             * *         #####  #","#         o    **        #    *  #","# *****        @   o   #### **   #","#   @*** ###   ***        # ***  #","#        #   ****  o         #o  #","#            *****  **   #       #","#  o  *   o ###     o**#         #","#     ***     #         #        #","#    *   o    #   @   ###   @    #","#                     o          #","##################################"];function I(e){return r.a.createElement("div",{className:"customizeWorld"},r.a.createElement("h2",null,"World settings"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"turnDelay"},"Turn Delay (in milliseconds):"),r.a.createElement("input",{type:"number",min:"50",id:"turnDelay",className:"form-control",name:"turnDelay",defaultValue:e.defaultTurnDelay,placeholder:"Enter a world change delay",onChange:e.setValue}),r.a.createElement("small",{className:"form-text text-muted"},"Time turn delay must be greater or equal 50 miliseconds")),r.a.createElement("div",{className:"wrapperMapSizeSetting"},r.a.createElement("div",null,"Choose the size of the world: "),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sizeWorld",id:"largeWorld",value:"largePlan",onChange:e.changeSizeWorld,defaultChecked:e.defaultSizeWorld===N?"checked":""}),r.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio1"},"Large")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sizeWorld",id:"mediumWorld",value:"mediumPlan",onChange:e.changeSizeWorld,defaultChecked:e.defaultSizeWorld===C?"checked":""}),r.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio2"},"Medium")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"sizeWorld",id:"smallWorld",value:"smallPlan",onChange:e.changeSizeWorld,defaultChecked:e.defaultSizeWorld===z?"checked":""}),r.a.createElement("label",{className:"form-check-label",htmlFor:"inlineRadio3"},"Small"))),r.a.createElement("button",{className:"btn btn-primary",onClick:e.toggleShowViewWorld},"Create World"))}n(15);var V=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showViewWorld:!1,turnDelay:300,sizeWorld:C},n.toggleShowViewWorld=function(){n.setState({showViewWorld:!n.state.showViewWorld})},n.setValue=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.changeSizeWorld=function(e){switch(console.log(e.target.value),e.target.value){case"largePlan":n.setState({sizeWorld:N});break;case"mediumPlan":n.setState({sizeWorld:C});break;case"smallPlan":n.setState({sizeWorld:z});break;default:return}},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showViewWorld,n=e.turnDelay,a=e.sizeWorld;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Virtual Ecosystem"),t?r.a.createElement(j,{toggleShowViewWorld:this.toggleShowViewWorld,turnDelay:n,sizeWorld:a}):r.a.createElement(I,{toggleShowViewWorld:this.toggleShowViewWorld,setValue:this.setValue,changeSizeWorld:this.changeSizeWorld,defaultTurnDelay:n,defaultSizeWorld:a}))}}]),t}(a.Component);i.a.render(r.a.createElement(V,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.cb91f395.chunk.js.map